{% load static %}

<!-- Back Button Component -->
<div class="back-button-container">
    <button onclick="goBack()" class="btn-back">
        <i class="fas fa-arrow-left"></i> Back
    </button>
</div>

<style>
    .back-button-container {
        position: fixed;
        top: 100px;
        left: 20px;
        z-index: 1000;
    }
    
    .btn-back {
        background: linear-gradient(135deg, #6c757d, #495057);
        color: white;
        border: none;
        padding: 12px 20px;
        border-radius: 25px;
        font-weight: 600;
        font-size: 14px;
        cursor: pointer;
        transition: all 0.3s ease;
        box-shadow: 0 4px 15px rgba(0, 0, 0, 0.2);
        display: flex;
        align-items: center;
        gap: 8px;
    }
    
    .btn-back:hover {
        background: linear-gradient(135deg, #495057, #343a40);
        transform: translateY(-2px);
        box-shadow: 0 6px 20px rgba(0, 0, 0, 0.3);
        color: white;
        text-decoration: none;
    }
    
    .btn-back:active {
        transform: translateY(0);
    }
    
    /* Responsive design */
    @media (max-width: 768px) {
        .back-button-container {
            position: relative;
            top: auto;
            left: auto;
            margin-bottom: 20px;
            text-align: left;
        }
        
        .btn-back {
            padding: 10px 16px;
            font-size: 13px;
        }
    }
</style>

<script>
    function goBack() {
        // Check if we're on a public page
        const isPublicPage = window.location.pathname.includes('/book-appointment/') || 
                           window.location.pathname.includes('/confirmation/') ||
                           window.location.pathname === '/' ||
                           window.location.pathname === '/about/' ||
                           window.location.pathname === '/contact/';
        
        // Check if we're on an admin page
        const isAdminPage = window.location.pathname.includes('/clinic/') ||
                          window.location.pathname.includes('/admin/');
        
        // Try to go back in browser history first
        if (window.history.length > 1) {
            window.history.back();
        } else {
            // Fallback based on page type
            if (isAdminPage) {
                // For admin pages, go to dashboard
                window.location.href = "{% url 'clinic:dashboard' %}";
            } else if (isPublicPage) {
                // For public pages, go to home
                window.location.href = "{% url 'home' %}";
            } else {
                // Default fallback
                window.location.href = "{% url 'home' %}";
            }
        }
    }
    
    // Also support browser back button and Escape key
    document.addEventListener('keydown', function(event) {
        if (event.key === 'Escape') {
            goBack();
        }
    });
    
    // Add keyboard shortcut info
    document.addEventListener('DOMContentLoaded', function() {
        // Add tooltip on hover
        const backButton = document.querySelector('.btn-back');
        if (backButton) {
            backButton.title = 'Go back (or press Escape)';
        }
    });
</script> 